<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'/>
<!--[if lt IE 9]>
<script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src='underscore-min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.js'></script>
<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
<link href='https://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.css' rel='stylesheet' />

        <!-- Colorbox
        ================================================== -->
<link rel="stylesheet" href="colorbox.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="jquery.colorbox-min.js"></script>
        <script>
                $(document).ready(function(){
                        //Examples of how to assign the Colorbox event to elements
                        $(".sheffieldPix").colorbox({rel:'sheffieldPix', transition:"fade", maxWidth:"90%", maxHeight:"90%"});
                        $(".makaroraPix").colorbox({rel:'makaroraPix', transition:"fade", maxWidth:"90%", maxHeight:"90%"});
                        $(".hokitikaPix").colorbox({rel:'hokitikaPix', transition:"fade", maxWidth:"90%", maxHeight:"90%"});
                        $(".brucePix").colorbox({rel:'brucePix', transition:"fade", maxWidth:"90%", maxHeight:"90%"});
                        $(".wanakaPix").colorbox({rel:'wanakaPix', transition:"fade", maxWidth:"90%", maxHeight:"90%"});
                                
                });
        </script>


<style>
body {
  margin:0px;
  padding:0px;
  font:normal 15px/20px Arial,sans-serif;
  background:#fff;
  }

article {
  width:33.3333%;
  min-width:320px;
  position:relative;
  padding-top:40px;
  padding-bottom:33.3333%;
  }
section {
  padding:40px;
  margin-left:40px;
  position:relative;
  transition:background 500ms, color 500ms;
  -moz-transition:background 500ms, color 500ms;
  -webkit-transition:background 500ms, color 500ms;
  }
section,
section a {
  color:#888;
  color:rgba(128,128,128,0);
  text-decoration:none;
  text-shadow:rgba(64,64,64,1) 0px 0px 4px;
  }
section.active {
  background:#222;
  color:#eee;
  }
section.active a { color:#eee; text-decoration:underline;}
section.active small { color:#aaa; }
h1 { font-size:2em; line-height:1em; }
h2 { font-size:1.3333em; }
h1,h2 { margin:0px 0px 10px; }
p { margin:0px; }

.scroll {
  position:absolute;
  right:0px; bottom:0px;
  font-size:10px;
  text-transform:uppercase;
  padding:5px 10px;
  }
.colophon {
  display:block;
  margin-top:10px;
  }

.cover:before {
  content:'';
  display:block;
  width:120px; height:120px;
  margin:0px auto 20px;
  }
.cover.active:before { background:url() 0px -120px no-repeat; }

#pane {
  position:fixed;
  top:0px;
  bottom:0px;
  right:0px;
  width:66.6666%;
  }
#map  {
  position:absolute;
  top:0px;
  bottom:0px;
  width:200%;
  left:-50%;
  transition:opacity 250ms;
  -moz-transition:opacity 250ms;
  -webkit-transition:opacity 250ms;
  }

.spot {
  width:120px;
  height:120px;
  margin:-60px 0px 0px -60px;
  background:url() 120px 120px no-repeat;
  position:absolute;
  }
.spot-cover { display:none; }
.spot-arthurspass { background-position:20px 0px; }
.spot-arthurspass.active { background-position:20px 20px; }
.spot-hokitika { background-position:-520px 0px; }
.spot-hokitika.active { background-position:-520px -120px; }
.spot-ross { background-position:-520px 0px; }
.spot-ross.active { background-position:-520px -120px; }
.spot-whataroa { background-position:-520px 0px; }
.spot-whataroa.active { background-position:-520px -120px; }
.spot-makarora { background-position:100px 100px; }
.spot-makarora.active { background-position:-520px -120px; }
.spot-sheffield { background-position:-520px 0px; }
.spot-sheffield.active { background-position:-520px -120px; }
.spot-christchurch { background-position:-650px 0px; }
.spot-christchurch.active { background-position:-650px -120px; }
.spot-brucesbay { display:none; }
.spot-brucesbay.active {  
  display:initial;
  width:50%;
  height:50%;
  background:url(http://farm8.staticflickr.com/7369/12330054625_d68f0e606d.jpg) no-repeat; }

/* Distinguish the "cover page" visually other sections. */
body.section-0 #map { opacity:0.5; }

@media (max-width:640px) {
  body {
    font-size:12px;
    line-height:16px;
    }
  article {
    width:100%;
    min-width:100%;
    padding-top:0px;
    padding-bottom:200%;
    }
  section {
    text-shadow:none;
    margin-left:0px;
    padding:30px;
    }
  section.active {
    position:fixed;
    top:0px; left:0px; right:0px;
    }
  #pane { width:100%; }
  #map  {
    bottom:0%;
    left:0%;
    width:100%;
    height:150%;
    }
  }

@media (min-width:1280px) {
  body {
    font-size:18px;
    line-height:24px;
    }
  }
</style>
</head>
<body class='section-0'>

<div id='pane'><div id='map'></div></div>

<article>
  <section id='cover' class='cover active'>
    <h1>A <br> New Zealand <br> Cycle Tour</h1>
    <p>January 2014</p>
    <p><a href="http://www.danielcarmody.net">Dan Carmody</a></p>
    <p>full photo album available on <a href="https://www.flickr.com/photos/carmodydr/albums/72157640553163783">Flickr</a></p>
    <small class='scroll'>Scroll ▼</small>
  </section>
  <section id='christchurch'>
    <h2>Christchurch</h2>
    <p>Christchurch is the largest city on the South Island, and the third largest in New Zealand. Due to a series of earthquakes in 2010 and 2011, the city center is a mix of empty lots and damaged buildings. It appears mostly abandoned, other than a few shops here and there and a couple of 'pop-up' mall areas.</p>
  </section>
  <section id='sheffield'>
    <h2>Sheffield</h2>
    <p>About 60 km from our circlet in Christchurch we encountered the town of Sheffield, home to the<a class="sheffieldPix" href="http://farm8.staticflickr.com/7336/12334639493_ff82f36071.jpg" title="Sheffield Pie Shop"> Sheffield Pie Shop</a>, where we celebrated lunchtime with savory pies and <a class="sheffieldPix" href="http://farm4.staticflickr.com/3783/12334448275_994d1f191d.jpg" title="A cream donut.">cream donuts</a>.</p>
  </section>
 <section id='arthurspass'>
    <h2>Arthur's Pass</h2>
    <p>The town of Arthur's Pass is a small tourist stop just before the pass itself.</p>
  </section>
  <section id='hokitika'>
    <h2>Hokitika</h2>
    <p>With a population of about 3000 people, <a class="hokitikaPix" href="https://farm4.staticflickr.com/3734/12384687613_531dbb3b2f_z_d.jpg" title="Hokitika artwork">Hokitika</a> was the biggest place we would pass through, other than Christchurch. It is home to many greenstone (jade) artisans and a fair share of restaurants and bakeries.</p>
  </section>
  <section id='ross'>
    <h2>Ross</h2>
    <p>The Empire Hotel in Ross was a colorful stopping point. Shortly after making the decision to stay the night in one of the rooms, it began to pour outside, or "pissing down", in the words of one of the owners of the hotel.</p>
  </section>
  <section id='whataroa'>
    <h2>Whataroa</h2>
    <p>We arrived at Whataroa tired and hungry. With rain on the horizon and a warm bar with hot food in front of us, we decided to stick around for the night.</p>
  </section>
  <section id='brucesbay'>
    <h2>Bruce's Bay</h2>
    <p>We found a spot to camp on <a class="brucePix" href="https://farm8.staticflickr.com/7369/12330054625_d68f0e606d_z_d.jpg" title="Camping on the beach">the beach</a> amid a huge collection of driftwood. While we were cooking dinner a campervan parked nearby and a family disembarked. Two little kids, ages 8 and 10, came over and told us that their dad was making a <a class="brucePix" href="https://farm3.staticflickr.com/2885/12385308554_2236ae775d_z_d.jpg" title="Bonfire on the beach">bonfire</a>, and that we were invited. We joined them and were greeted with marshmallows to toast and a couple of beers.</p>
  </section>
  <section id='haast'>
    <h2>Haast</h2>
    <p>The road between Haast and Makarora is closed overnight due to recent rockfall that swept over the road and killed two people. The pass, called the Gates of Haast, is a steep section of roadway with rock walls to one side and a gorge to the other. </p>
  </section>
  <section id='makarora'>
    <h2>Makarora</h2>
    <p>There was a campground in Makarora, and <a class="makaroraPix" href="https://farm3.staticflickr.com/2844/12385398615_172e75b54c_z_d.jpg" title="Empty Makarora road">not much else</a>. We were lucky enough to have a clear sky at night for circlegazing.</p>
  </section>
  <section id='wanaka'>
    <h2>Wanaka</h2>
    <p>Wanaka was warm and sunny, and the final point of our bike tour. From Wanaka we caught a bus back to Christchurch, passing by the <a class="wanakaPix" href="https://farm8.staticflickr.com/7321/12386188304_2f41d6c1b5_k_d.jpg" title="Lake Pukaki and Mount Cook/Aoraki">teal waters of Lake Pukaki and the distant, frosty form of Aoraki</a>.</p>
  </section>
<section id='finish'>
    <h2>The End</h2>
    <p></p>
    <small class='colophon'>
      Adapted from <a href='http://alistapart.com/article/hack-your-maps'>The Adventure of the Bruce-Partington Plans</a>, as told by Young Hahn<br/>
      Map data &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap Contributors</a><br/>
      Map design &copy; <a href='http://mapbox.com/about/maps/'>MapBox</a>
    </small>
  </section>
</article>

<script>
var geojson = [
  { "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "cover", "zoom": 7 } },
  { "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "christchurch", "zoom": 9 } },
  { "geometry": { "type": "Point", "coordinates": [171.565294,-42.945804] },
    "properties": { "id": "arthurspass" } },
  { "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "finish" } },
  { "geometry": { "type": "Point", "coordinates": [169.610624,-43.591395] },
    "properties": { "id": "brucesbay" } },
  { "geometry": { "type": "Point", "coordinates": [169.131426,-44.696887] },
    "properties": { "id": "wanaka" } },
  { "geometry": { "type": "Point", "coordinates": [172.021419,-43.390014] },
    "properties": { "id": "sheffield" } },
  { "geometry": { "type": "Point", "coordinates": [170.966543,-42.717369] },
    "properties": { "id": "hokitika" } },
  { "geometry": { "type": "Point", "coordinates": [170.359043,-43.261583] },
    "properties": { "id": "whataroa" } },
  { "geometry": { "type": "Point", "coordinates": [169.042437,-43.881107] },
    "properties": { "id": "haast" } },
  { "geometry": { "type": "Point", "coordinates": [169.232025,-44.231056] },
    "properties": { "id": "makarora" } },
  { "geometry": { "type": "Point", "coordinates": [170.816975,-42.899578] },
    "properties": { "id": "ross" } },
  {"geometry":{"coordinates":[169.04422760009766,-43.86077227578091],"type":"Point"},"properties":{"description":"We stayed at a backpacker here.","id":"marker-hrxrvafu0","marker-color":"#1087bf","marker-size":"medium","marker-symbol":"","title":"Haast"}}
];
/*
geojson = {
  "type": "FeatureCollection",
  "features": [ 
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "cover", "zoom": 7 } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "christchurch", "zoom": 9 } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [171.565294,-42.945804] },
    "properties": { "id": "arthurspass" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [172.636225,-43.532054] },
    "properties": { "id": "finish" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [169.610624,-43.591395] },
    "properties": { "id": "brucesbay" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [169.131426,-44.696887] },
    "properties": { "id": "wanaka" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [172.021419,-43.390014] },
    "properties": { "id": "sheffield" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [170.966543,-42.717369] },
    "properties": { "id": "hokitika" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [170.359043,-43.261583] },
    "properties": { "id": "whataroa" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [169.042437,-43.881107] },
    "properties": { "id": "haast" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [169.232025,-44.231056] },
    "properties": { "id": "makarora" } },
  { "type": "Feature", "geometry": { "type": "Point", "coordinates": [170.816975,-42.899578] },
    "properties": { "id": "ross" } },
  {"type": "Feature", "geometry":{"coordinates":[169.04422760009766,-43.86077227578091],"type":"Point"},"properties":{"description":"We stayed at a backpacker here.","id":"marker-hrxrvafu0","marker-color":"#1087bf","marker-size":"medium","marker-symbol":"","title":"Haast"}}
 ]
};
*/
var tiles = mapbox.layer().tilejson({
  tiles: [ "https://a.tiles.mapbox.com/v3/dcarmody.hb35hbm8/{z}/{x}/{y}.png" ]
});

// Creates the map with tile and marker layers and
// no input handlers (mouse drag, scrollwheel, etc).
var map = mapbox.map('map', [tiles] , null, []);

/*
var map = L.map('map').setView([-42, 170], 6);
L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
    maxZoom: 18,
    id: 'dcarmody.hb35hbm8',
    accessToken: 'pk.eyJ1IjoiZGNhcm1vZHkiLCJhIjoiSUlWeU1NTSJ9.V7TY3S0gmUS6uazTLfcUgw'
}).addTo(map);
*/

var spots = mapbox.markers.layer()
  // Load up markers from geojson data.
  .features(geojson)
  // Define a new factory function. Takes geojson input and returns a
  // DOM element that represents the point.
  .factory(function(f) {
    var el = document.createElement('div');
    el.className = 'spot spot-' + f.properties.id;
    return el;
  });

/*
spots = L.geoJSON(geojson , {
    onEachFeature: function (feature) {
    	var el = document.createElement('div');
    	el.className = 'spot spot-' + feature.properties.id;
	return el;
    },
	pointToLayer: function(feature, latlng) {
        	return L.circleMarker(latlng);
	}
}).addTo(map);
*/


var route = [{ 'geometry': { 'type': 'Point', 'coordinates': [172.62542724609375, -43.529633517604275] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.56980895996094, -43.53212261888176] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.52243041992188, -43.51668853502907] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.47093200683594, -43.5077249968701] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.42835998535156, -43.49975628978044] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.39540100097656, -43.500254364789825] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.35282897949216, -43.48929576545247] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.3157501220703, -43.48331750944707] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.276611328125, -43.47684039777892] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.22991943359375, -43.46488082892955] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.19215393066406, -43.45291889355465] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.1564483642578, -43.440456027775525] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.1276092529297, -43.427990594270234] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.09671020507812, -43.4125298907573] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.0740509033203, -43.40504748787035] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.03353881835938, -43.39955980496342] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [172.01156616210938, -43.38259473335271] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.9847869873047, -43.36911908773855] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.9586944580078, -43.354142636008895] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.93466186523438, -43.34066066859799] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.91062927246094, -43.330672095515006] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.8762969970703, -43.330172623732096] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.85638427734375, -43.32767520320563] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.82754516601562, -43.330172623732096] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7993927001953, -43.33167102675838] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.78085327148438, -43.319682767472116] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.75888061523438, -43.306193147845754] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.72523498535156, -43.29419986119423] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.70875549316406, -43.28520334369382] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7101287841797, -43.26620632572599] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.72592163085938, -43.24670321968835] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.72386169433594, -43.22419187405091] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7218017578125, -43.20267326305701] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7321014404297, -43.185653172141755] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7218017578125, -43.164621800463564] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.74102783203125, -43.146088162555635] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.76918029785156, -43.12955341892065] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.77536010742188, -43.1054949013081] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.77330017089844, -43.07942083303978] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.75682067871094, -43.054339145246814] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7485809326172, -43.031254928686366] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.73965454101562, -43.010170449724214] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.7060089111328, -43.01870551582463] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.67510986328125, -43.03225877088821] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.6442108154297, -43.029247195025775] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.60850524902344, -43.02171760887777] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.58927917480466, -43.011174636716305] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.58927917480466, -42.9875719019312] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.5782928466797, -42.96697487803267] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.5625, -42.94385780966297] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.5583801269531, -42.91570357106181] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.5563201904297, -42.89005190714458] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.5583801269531, -42.862376386912224] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.56524658203125, -42.834184923259606] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.56661987304688, -42.81202546153517] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.58721923828125, -42.792881352937215] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.6194915771484, -42.77473936479761] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.60781860351562, -42.7621376340935] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.57279968261716, -42.76062525412705] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.54327392578122, -42.75104599038352] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.51168823242185, -42.74398663800527] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.48422241210938, -42.74549942405071] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.45538330078125, -42.73642215405084] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.4299774169922, -42.739448058377434] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.40457153320312, -42.75507954507213] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.37367248535156, -42.76112938488444] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.3427734375, -42.765162283274684] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.3201141357422, -42.75608789272608] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.3036346435547, -42.74146524589548] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.27960205078125, -42.73188302070198] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.2500762939453, -42.724821486252736] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.23428344726562, -42.7061549897815] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.2212371826172, -42.684454439710215] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.20750427246094, -42.66426107379467] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.1944580078125, -42.64658649632018] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.1882781982422, -42.62941209678919] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.15943908691406, -42.60869548716231] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.13540649414062, -42.59100512331454] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.11961364746094, -42.581399679665054] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.10313415527344, -42.60313619972951] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.0845947265625, -42.62385465855649] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.0619354248047, -42.64355606437453] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.03927612304688, -42.66375615557904] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [171.0138702392578, -42.677892315499236] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.99258422851562, -42.69303463329987] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.9740447998047, -42.709686919756656] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.958251953125, -42.72986552146145] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.92941284179688, -42.748020652091924] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.9095001220703, -42.77423534479347] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.89508056640625, -42.796408344361296] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.8930206298828, -42.81303288210236] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.89576721191406, -42.833681387335886] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.87448120117188, -42.85532972724642] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.8545684814453, -42.87646729366016] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.8312225341797, -42.89055498353175] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.7982635498047, -42.89457944690952] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.77011108398438, -42.90665126134539] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.75706481933594, -42.92676569958483] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.7598114013672, -42.94385780966297] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.73646545410156, -42.959437657743486] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.71998596191406, -42.97953485978903] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.6897735595703, -42.98003720570484] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.6774139404297, -42.99711452479042] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.66505432128906, -43.017701451969884] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.65338134765622, -43.03376450340531] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.63621520996094, -43.0548408795765] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.62522888183594, -43.081426924708076] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.6341552734375, -43.10900402427309] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.6334686279297, -43.13456441945701] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.628662109375, -43.15360247702298] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.5751037597656, -43.15109780818095] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.5345916748047, -43.14809207007616] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.49888610839844, -43.157108840953285] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.46661376953122, -43.15911238715417] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.4521942138672, -43.18365049642939] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.45150756835935, -43.20917969039355] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.43846130371094, -43.229195113965005] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.42816162109375, -43.25020423714624] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.41717529296875, -43.278205132315556] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.3931427001953, -43.28520334369382] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.37185668945312, -43.264206294638356] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.33958435058594, -43.27920492608278] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.31074523925778, -43.28470349814845] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.29014587402344, -43.26620632572599] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.26611328125, -43.25220472820158] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.24002075195312, -43.263206254453074] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.22972106933594, -43.29020157325696] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.2228546142578, -43.30719248161191] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.21392822265625, -43.324678163028096] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.2118682861328, -43.34415628101458] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.2015686035156, -43.36462654040094] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.1775360107422, -43.37710501700071] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.15625, -43.38309377382829] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.1280975341797, -43.39007990915452] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.11367797851562, -43.40604519499397] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.0896453857422, -43.42400111325475] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.07179260253906, -43.44344734974144] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.0415802001953, -43.455411158577995] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [170.01686096191406, -43.470362591750124] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.98802185058594, -43.484812128916026] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.96261596679688, -43.496269649668086] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.925537109375, -43.49178653083375] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.8918914794922, -43.48829943053877] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.8760986328125, -43.48929576545247] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.86854553222656, -43.51668853502907] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.84107971191406, -43.52863784832998] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.8383331298828, -43.544068875053696] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.8204803466797, -43.56496912804992] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.8053741455078, -43.57392416032963] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.78065490722653, -43.566959250284214] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.7545623779297, -43.56248138279792] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.7222900390625, -43.562978940066884] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.69482421875, -43.56148625593214] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.6783447265625, -43.568451798812184] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.68109130859375, -43.58138567016359] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.65431213378906, -43.57889860295368] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.6254730224609, -43.58486739166198] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.6021270751953, -43.59680319379519] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.5911407470703, -43.6132110567126] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.59182739257812, -43.63408731864002] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.5849609375, -43.64452273099927] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.57809448242185, -43.659924074789096] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.54925537109375, -43.680784110954846] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.53277587890625, -43.688728884327936] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.5032501220703, -43.71007524900856] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.47303771972656, -43.707593504052944] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.44900512695312, -43.708586214366015] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.42909240722656, -43.71007524900856] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.4139862060547, -43.72248243242104] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3975067138672, -43.73984817330242] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.37965393066406, -43.75720887884938] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3645477294922, -43.77059798257491] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.33914184570312, -43.76911045236617] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3206024169922, -43.749769193052266] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.30068969726562, -43.73191017368391] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.27322387695312, -43.72099370605267] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.24781799316406, -43.7294293330051] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.2279052734375, -43.716031017652014] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.20730590820312, -43.7289331525381] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.18121337890625, -43.74034426333965] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.15855407714844, -43.75572101568018] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.14070129394528, -43.76960629987975] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.12628173828122, -43.78794976806043] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.10499572753906, -43.79934962807195] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.08370971679688, -43.813224783374594] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.06517028808594, -43.82610597028619] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.06036376953125, -43.8503744993026] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.04869079589844, -43.863742736054014] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.04457092285156, -43.88552158900779] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.0583038330078, -43.90135575541163] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.07684326171875, -43.91768033000404] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.09881591796875, -43.9265827562361] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.12353515625, -43.936967236484854] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.14688110351562, -43.943394815590366] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.15649414062497, -43.96069638244953] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.18052673339844, -43.968603992569335] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.22035217285156, -43.97206324099821] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.24713134765625, -43.95674218266098] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.2718505859375, -43.94092275201342] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.30618286132812, -43.946855531908355] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.33570861816406, -43.955753591596505] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.36935424804688, -43.9562478891846] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.38858032226562, -43.97206324099821] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.4256591796875, -43.9740398639264] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.40505981445312, -43.9942964557587] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.38446044921875, -44.01108936239007] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.36729431152344, -44.02540896761497] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3824005126953, -44.04367378791097] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.38377380371094, -44.06291980156017] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3714141845703, -44.086105404563355] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.3549346923828, -44.107802842512775] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.33982849121094, -44.12998516884592] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.31442260742188, -44.148217731753256] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.2938232421875, -44.156100339528294] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.2780303955078, -44.16496701479714] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.26567077636716, -44.18466596685653] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.25262451171875, -44.196974470259356] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.24095153808594, -44.21813908312184] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.2285919189453, -44.23683636470254] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.21485900878906, -44.25356047707462] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.20181274414062, -44.26929647474019] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.20387268066403, -44.28797750151543] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.19288635253906, -44.31353138696477] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.17434692382812, -44.34152959888481] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.17228698730466, -44.357242035876354] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.18533325195312, -44.377367440029545] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.189453125, -44.4009201023823] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.18121337890625, -44.42691515712096] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.20867919921875, -44.44848717879621] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.23614501953125, -44.45583945679058] }, 'properties': {'marker-symbol': 'circle-stroked'} },{ 'geometry': { 'type': 'Point', 'coordinates': [169.24850463867188, -44.472991172602505] }, 'properties': {'marker-symbol': 'circle-stroked'} }];



var myLayer = mapbox.markers.layer(map);
myLayer.features(route);
map.addLayer(myLayer);

// Array of story section elements.
var sections = document.getElementsByTagName('section');


// Array of marker elements with order matching section elements.
var markers = _(sections).map(function(section) {
  return _(spots.markers()).find(function(m) {
    return m.data.properties.id === section.id;
  });
});

// Helper to set the active section.
var setActive = function(index, ease) {
  // Set active class on sections, markers.
  _(sections).each(function(s) { s.className = s.className.replace(' active', '') });
  _(markers).each(function(m) { m.element.className = m.element.className.replace(' active', '') });
  sections[index].className += ' active';
  markers[index].element.className += ' active';

  // Set a body class for the active section.
  document.body.className = 'section-' + index;

  // Ease map to active marker.
  if (!ease) {
    map.centerzoom(markers[index].location, markers[index].data.properties.zoom||11);
  } else {
    map.ease.location(markers[index].location).zoom(markers[index].data.properties.zoom||11).optimal(0.5, 1.00);
  }

  return true;
};

// Bind to scroll events to find the active section.
window.onscroll = _(function() {
  // IE 8
  if (window.pageYOffset === undefined) {
    var y = document.documentElement.scrollTop;
    var h = document.documentElement.clientHeight;
  } else {
    var y = window.pageYOffset;
    var h = window.innerHeight;
  }

  // If scrolled to the very top of the page set the first section active.
  if (y === 0) return setActive(0, true);

  // Otherwise, conditionally determine the extent to which page must be
  // scrolled for each section. The first section that matches the current
  // scroll position wins and exits the loop early.
  var memo = 0;
  var buffer = (h * 0.3333);
  var active = _(sections).any(function(el, index) {
    memo += el.offsetHeight;
    return y < (memo-buffer) ? setActive(index, true) : false;
  });

  // If no section was set active the user has scrolled past the last section.
  // Set the last section active.
  if (!active) setActive(sections.length - 1, true);
}).debounce(10);

// Set map to first section.
setActive(0, false);


</script>

</body>
</html>
